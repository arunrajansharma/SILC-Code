START
MOV SP, 0
MOV BP, 0
JMP main
fn0:
PUSH BP
MOV BP,SP
PUSH R0
I0:
MOV R0, BP
MOV R1, -3
ADD R1, R0
MOV R0, [R1]
MOV R1,1
EQ  R0,R1
JZ R0,E0
MOV R1, BP
MOV R2, 1
ADD R1, R2
MOV R2,1
MOV [R1], R2
JMP EI0
E0:
MOV R1, BP
MOV R2, 1
ADD R1, R2
MOV R2, BP
MOV R3, -3
ADD R3, R2
MOV R2, [R3]
PUSH R2
PUSH R1
PUSH R0
MOV R0, BP
MOV R1, -3
ADD R1, R0
MOV R0, [R1]
MOV R1,1
SUB R0,R1
PUSH R0
PUSH R0
CALL fn0
POP R3
POP R4
POP R0
POP R1
POP R2
MUL R2,R3
MOV [R1], R2
EI0:
MOV R1, BP
MOV R2, 1
ADD R2, R1
MOV R1, [R2]
MOV R2, BP
MOV R3, -2
ADD R2, R3
MOV [R2], R1
POP R0
POP BP
RET
main:
PUSH BP
MOV BP,SP
PUSH R0
PUSH R0
IN R1
MOV R2, BP
MOV R3, 1
ADD R2, R3
MOV [R2], R1
MOV R1, BP
MOV R2, 2
ADD R1, R2
MOV R2,1
MOV [R1], R2
W0:
MOV R1, BP
MOV R2, 2
ADD R2, R1
MOV R1, [R2]
MOV R2, BP
MOV R3, 1
ADD R3, R2
MOV R2, [R3]
LE  R1,R2
JZ R1,EW0
PUSH R1
PUSH R0
MOV R0, BP
MOV R1, 2
ADD R1, R0
MOV R0, [R1]
PUSH R0
PUSH R0
CALL fn0
POP R2
POP R3
POP R0
POP R1
OUT R2
MOV R2, BP
MOV R3, 2
ADD R2, R3
MOV R3, BP
MOV R4, 2
ADD R4, R3
MOV R3, [R4]
MOV R4,1
ADD R3,R4
MOV [R2], R3
JMP W0
EW0:
MOV R2,1
HALT